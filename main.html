<!DOCTYPE html>
    <html>
        <head>
            <style>
                html {
                background-color: rgb(0, 0, 0);
                }
            
                #text {
                font-family: monospace;
                color:rgb(255, 255, 255);
                }
                
                #form {
                    font-family: monospace;
                    background-color: rgb(0, 0, 0);
                    color:rgb(255, 255, 255);
                }
            </style>
        </head>
        <body>
            <form id="input form">
                <input type= "text" size= "160" id= 'form' autocomplete="off">
            </form>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js">     //the jQuery library
            
            </script>

            <p id="text">
                <br>
            </p>

            <script id="files,msg,lib">
                var files = {   //the files object
                    txt: {      //text files
                        tmp: "",
                        notes: ["0: entrie (/end)"]
                    },
                    js: {       //javascript files
                        tmp: ""
                    },
                    json: {     //json files
                        tmp: ""
                    }
                }

                var msg = {
                    err: [      //the error messages
                    "error: file not found", 
                    "error: cannot open that file type in that way", 
                    "error: that file type doesn't exist",
                    "error: that file type alredy exists",
                    "error: no notes.txt found, cannot write notes"
                    ]
                }

                var lib = {
                    log: function(log, file) {     //the console output shorthand for inner .js files
                        $('#text').prepend(file+' >> '+log+'<br>')
                    }, 
                    cmlog: function(log) {      //the console output shorthand for the system
                        $('#text').prepend(log+'<br>');
                    },
                    usrLog: function(log) {     //the console output shorthand for user output
                        $('#text').prepend('<br>');
                        $('#text').prepend('>>>'+log+'<br>');
                    }
                }

            </script>

            <script>
                var setFormVal = {
                    val: '',
                }
                var vars = {
                    system: {
                        locked: false,
                        pass: "pass",
                        username: "new_user"
                    },
                    game: {
                        mover: {
                            isRunning: 0,
                            playerX: 0,
                            playerY: 0,
                            wallXs: [],
                            wallYs: [],
                            goalX: 0,
                            goalY: 0,
                            drawFeild: function(size) {
                                var playerX = vars.game.mover.playerX;  //player X
                                var playerY = vars.game.mover.playerY;  //player Y
                                var goalX = vars.game.mover.goalX;      //goal X
                                var goalY = vars.game.mover.goalY;      //goal Y
                                var wallXs = vars.game.mover.wallXs;    //wall X's
                                var wallYs = vars.game.mover.wallYs;    //wal Y's
                                var isDead = null;     //is dead
                                var isWin = false;
                                var isNoWall = true;
                                var output = '';    //output
                                for (var y = 0; y < size; y++) {    //cycles through rows
                                    output = '';
                                    for (var x = 0; x < size*4; x++) {  //cycles through cells of the row
                                        for (var z = 0; z < wallXs.length; z++) {   //cycles through walls
                                            if ((wallYs[z] == y)&&(wallXs[z] == x)) {    //if the selected wall's y-value is the same as the selected cell's
                                                output += '0';
                                                wallPos = [wallXs[z], wallYs[z]];
                                                if ((playerX == wallXs[z])&&(playerY == wallYs[z])) {
                                                    isDead = 'wall';
                                                } else if ((goalX == playerX)&&(goalY == playerY)) {
                                                    isWin = true;
                                                }
                                                isNoWall = false;
                                            }
                                        }
                                        if (isNoWall) {
                                            if ((playerY == y)&&(playerX == x)) { //if player position is the same as the selected cell
                                                output += 'Y';
                                            } else if ((goalX == x)&&(goalY == y)) {
                                                output += 'G';
                                            } else {
                                                output += '-';
                                            }
                                        }
                                        isNoWall = true;
                                    }

                                    lib.cmlog(output);  //output the row
                                }
                                if (isDead == 'wall') {
                                    vars.game.mover.gameover('ran into a wall');
                                }
                                if (isWin) {
                                    vars.game.mover.win("a win's a win, take it.");
                                }
                                
                            },
                            move: function(direction) {
                                var playerX = vars.game.mover.playerX;  //player X
                                var playerY = vars.game.mover.playerY;  //player Y

                                if (direction == 'w') {         //move  up  with w
                                    vars.game.mover.playerY++;
                                } else if (direction == 'a') {  //move left with a
                                    vars.game.mover.playerX--;
                                } else if (direction == 's') {  //move down with s
                                    vars.game.mover.playerY--;
                                } else if (direction == 'd') {  //move right with d
                                    vars.game.mover.playerX++;
                                }
                                vars.game.mover.drawFeild(20);
                            },
                            gameover: function(deathMsg) {
                                cm.game.mover.end();
                                setFormVal.val = 'game.mover.run';
                                lib.cmlog('GAME OVER...');
                                lib.cmlog(deathMsg);
                                    vars.game.mover.isRunning = 0;      //reseting variables
                                    vars.game.mover.playerX = 0;
                                    vars.game.mover.playerY = 0;
                                    vars.game.mover.wallXs = [];
                                    vars.game.mover.wallYs = [];
                                    vars.game.mover.goalX = 0;
                                    vars.game.mover.goalY = 0;
                                //
                            },
                            win: function(winMsg) {
                                cm.game.mover.end();
                                setFormVal.val = 'game.mover.run';
                                lib.cmlog('YOU WIN!!!');
                                lib.cmlog(winMsg);
                                    vars.game.mover.isRunning = 0;      //reseting variables
                                    vars.game.mover.playerX = 0;
                                    vars.game.mover.playerY = 0;
                                    vars.game.mover.wallXs = [];
                                    vars.game.mover.wallYs = [];
                                    vars.game.mover.goalX = 0;
                                    vars.game.mover.goalY = 0;
                                //
                            },
                            level: [
                                [1,1,  3,3,  2,2],
                                [0,1,  0,3,  0,2, 1,2, 2,2],
                                [0,0,  0,5,  1,0, 1,1, 0,3, 1,3, 1,4, 1,5]
                            ]
                        },
                        tycoon: {
                            isRunning: 0,
                            daysToPriceChange: 0,
                            usrCash: 100,
                            gameDay: 0,
                            resourceList: ["wheat", "coal", "wood", "tea", "plastics", "herbs", "steel"],
                            items: {
                                wheat: {
                                    basePrice: 10,
                                    MaxDeveation: 5
                                },
                                coal: {
                                    basePrice: 35,
                                    MaxDeveation: 10
                                },
                                wood: {
                                    basePrice: 15,
                                    MaxDeveation: 12
                                },
                                tea: {
                                    basePrice: 45,
                                    MaxDeveation: 23
                                },
                                plastics: {
                                    basePrice: 30,
                                    MaxDeveation: 15
                                },
                                herbs: {
                                    basePrice: 65,
                                    MaxDeveation: 37
                                },
                                steel: {
                                    basePrice: 40,
                                    MaxDeveation: 35
                                }
                            },
                            userInv: {
                                wheat: {
                                    amnt: 0
                                },
                                coal: {
                                    amnt: 0
                                },
                                wood: {
                                    amnt: 0
                                },
                                tea: {
                                    amnt: 0
                                },
                                plastics: {
                                    amnt: 0
                                },
                                herbs: {
                                    amnt: 0
                                },
                                steel: {
                                    amnt: 0
                                }
                            },
                            market: {
                                wheat: {
                                    amnt: 1000,
                                    price: 10,
                                    popularity: 50,
                                    nxtPrce: 10
                                },
                                coal: {
                                    amnt: 400,
                                    price: 35,
                                    popularity: 50,
                                    nxtPrce: 35
                                },
                                wood: {
                                    amnt: 700,
                                    price: 15,
                                    popularity: 50,
                                    nxtPrce: 15
                                },
                                tea: {
                                    amnt: 250,
                                    price: 45,
                                    popularity: 50,
                                    nxtPrce: 45
                                },
                                plastics: {
                                    amnt: 650,
                                    price: 30,
                                    popularity: 50,
                                    nxtPrce: 30
                                },
                                herbs: {
                                    amnt: 100,
                                    price: 65,
                                    popularity: 50,
                                    nxtPrce: 65
                                },
                                steel: {
                                    amnt: 400,
                                    price: 40,
                                    popularity: 50,
                                    nxtPrce: 40
                                }
                            },
                            sell: function(item, amount) {
                                var cash = vars.game.tycoon.usrCash;
                                var usrInv = vars.game.tycoon.userInv;
                                var market = vars.game.tycoon.market;
                                var mktItm = market[item];
                                var itm = usrInv[item];
                                if (itm !== undefined) {
                                    if (itm.amnt > amount) {
                                        mktItm += amount;
                                        cash += mktItm.price * amount;
                                        itm.amnt -= amount;
                                    } else {
                                        lib.cmlog('you don\'t have that much ' + item);
                                    }
                                } else {
                                    lib.cmlog(item + 'doesn\'t exist');
                                }
                            },
                            buy: function(item, amount) {
                                var cash = vars.game.tycoon.usrCash;
                                var usrInv = vars.game.tycoon.userInv;
                                var market = vars.game.tycoon.market;
                                var mktItm = market[item];
                                var itm = market[item];
                                if (mktItm !== undefined) {
                                    if (mktItm.amnt > amount) {
                                        mktItm -= amount;
                                        cash -= mktItm.price * amount;
                                        itm.amnt += amount;
                                    } else {
                                        lib.cmlog('the market doesn\'t have that much ' + item);
                                    }
                                } else {
                                    lib.cmlog(item + 'doesn\'t exist');
                                }
                            },
                            wait: function(time) {
                                vars.game.tycoon.gameDay += time;
                                for (var i = 0; i < time; i++) {
                                    vars.game.tycoon.marketChange();
                                }
                                vars.game.tycoon.daylyDisplay();
                            },
                            daylyDisplay: function() {
                                lib.cmlog('day: '+vars.game.tycoon.gameDay);
                                lib.cmlog('cash: $'+vars.game.tycoon.usrCash);
                                lib.cmlog('i to list iventory');
                                lib.cmlog('m to list market prices');
                                lib.cmlog('s to sell');
                                lib.cmlog('b to buy');
                                lib.cmlog('w to wait');
                                lib.cmlog('r to rest until next day');
                                lib.cmlog('');
                            },
                            marketChange: function() {
                                var market = vars.game.tycoon.market;
                                var resourceList = vars.game.tycoon.resourceList;
                                var selR = null;
                                var DTPC = vars.game.tycoon.daysToPriceChange;

                                if (DTPC > 0) {
                                    DTPC--;
                                    for (var i = 0; i < resourceList.length; i++) {
                                        selR = market[resourceList[i]];
                                        if (selR.nxtPrce > selR.price) {
                                            selR.price += 1;
                                        } else if (selR.nxtPrce < selR.price) {
                                            selR.price -= 1;
                                        } else {
                                            selR.price += 0;
                                        }
                                        if (selR.price < 1) {
                                            selR.price = 1;
                                        }
                                    }
                                } else if (DTPC == 0) {
                                    for (var i = 0; i < resourceList.length; i++) {
                                        selR = market[resourceList[i]];
                                        selR.nxtPrce += (Math.random() * 10) - 5;
                                        if (selR.price < selR.nxtPrce) {
                                            selR.price += 1;
                                        } else if (selR.price > selR.nxtPrce) {
                                            selR.price -= 1;
                                        } else {
                                            selR.price += 0;
                                        }
                                        if (selR.price < 1) {
                                            selR.price = 1;
                                        }
                                    }
                                    DTPC += 5;
                                }
                            }
                        },
                        any: {
                            draw: function(size, x, y) {
                                for (var i = 0; i < size; i++) {     //cycles through rows
                                    var output = '';
                                    if (y == i) {
                                        for (var l = 0; l < size; l++) {      //cycles through segments of the row of playerY
                                            if (x == l) {     //adds an X to playerX of that row
                                                output += "-";
                                            } else {    //adds O otherwise
                                                output += "0";
                                            }
                                        }
                                        lib.cmlog(output);  //output row
                                    } else {    //if playerY is not in row, output an empty one
                                        for (var x = 0; x < size; x++) {
                                            output += "-";
                                        }
                                        lib.cmlog(output);
                                    }
                                }
                            }
                        }
                    }
                }
            </script>

            <script id="commands">
                var cm = {
                    test: function(a) {     //for testing
                        lib.cmlog("all, good!");
                        lib.cmlog("argument is: "+a);
                        setTimeout(function(){ lib.cmlog(a); }, 300);
                    },
                    console: {
                        clear: function() {     //clears the output console
                            $('#text').html('<br>');
                        }
                    },
                    file: {
                        set: function(nameAndType, contents) {      //sets a files contents
                            var nmTyp = nameAndType.split('.');     //splits the _._ into [_, _]
                            var name = nmTyp[0];       //gets the name of the file
                            var type = nmTyp[1];        //gets the type of file
                            var Type = files[type];     //gets the type object
                            if (Type == undefined) {
                                lib.cmlog(msg.err[2]);  //if the file type is not txt, js, json; send error 2
                            } else {
                                if (Type[name] == undefined) {
                                    Type[name] = contents;      //if that file dosent exist, make it
                                    lib.cmlog('file: '+nameAndType+' was created');
                                } else {
                                    Type[name] = contents;      //if that file exists, replace it
                                    lib.cmlog('file: '+nameAndType+' was replaced');
                                }
                            }
                        },
                        read: function(nameAndType) {       //reads file contents
                                var nmTyp = nameAndType.split('.');     //splits the _._ into [_, _]
                                var name = nmTyp[0];        //gets the name of the file
                                var type = nmTyp[1];        //gets the type of file
                                var Type = files[type];     //gets the type object
                                if (Type[name] == undefined) {
                                    lib.cmlog(msg.err[0]);      //if that file dosent exist, send error 0
                                } else {
                                    lib.cmlog(nameAndType+': '+Type[name]);     //ouput the contents of the file
                                }
                        },
                        delete: function(nameAndType) {     //deletes a file
                                var nmTyp = nameAndType.split('.');     //splits the _._ into [_, _]
                                var name = nmTyp[0];        //gets the name of the file
                                var type = nmTyp[1];        //gets the type of file
                                var Type = files[type];     //gets the type object
                                if (Type[name] == undefined) {
                                    lib.cmlog(msg.err[0]);      //if that file dosent exist, send error 0
                                } else {
                                    delete Type[name];      //delete that file
                                    lib.cmlog('file: '+nameAndType+' wes deleted');
                                }
                        },
                        run: function(nameAndType) {    //runs .js files
                            var nmTyp = nameAndType.split('.');
                            var name = nmTyp[0];    //get the file name
                            var type = nmTyp[1];    //get the file type
                            var Type = files[type]; //get to the type
                            var func = Type[name];  //compress the file to a variable
                            if (Type[name] == undefined) {  //checking to see if the file exists
                                lib.cmlog(msg.err[0]);
                            } else if (type == "js") {  //checking to see if it is a .js file
                                    eval(func); //run the file's contents as javascript
                                } else {
                                    lib.cmlog(msg.err[1]);
                                }
                        },
                        add: {
                            fileType: function(type) {          //WIP--------------------------------
                                Type = files[type];                     //you will be able to add file types
                                if (Type == undefined) {
                                    files[type] = {};
                                    Type = files[type];
                                    Type.tmp = "";
                                } else {
                                    lib.cmlog(msg.err[3]);
                                }
                            }                                   //WIP---------------------------------
                        },
                        list: {
                            all: function() {   //lists the files object as a string
                                lib.cmlog(JSON.stringify(files));
                            },
                            txt: function() {   //lists the objects under txt as a string
                                lib.cmlog(JSON.stringify(files.txt));
                            },
                            js: function() {    //lists the objects under js as a string
                                lib.cmlog(JSON.stringify(files.js));
                            },
                            json: function() {  //lists the objects under json as a string
                                lib.cmlog(JSON.stringify(filesjson));
                            }
                        }
                    },
                    msg: {
                        encode: function(msg) {     //encodes a message from english to KIHU Encoding
                                //the array that assigns all elegable characters a 2-digit number
                            var enc = [null,null,null,null,null,null,null,null,null,null,'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',' ',',','.','/','0','1','2','3','4','5','6','7','8','9'];
                            var msgA = msg.split('');   ////makes an array of every character in the input message
                            var msgEnc = "";    //will be the encoded message
                            for (var i = 0; i< msgA.length; i++) {
                                msgEnc = msgEnc + enc.indexOf(msgA[i]); //adds the next encoded character to msgEnc
                            }
                            lib.cmlog("^^^ Encoded message ^^^"); //outputs: ^^^ Encoded message ^^^
                            lib.cmlog(msgEnc);  //outputs the encoded message
                        },
                        decode: function(msgEnc) {  //decodes a message from KIHU Encoding to english
                                //the array that assigns all elegable characters a 2-digit number
                            var enc = [null,null,null,null,null,null,null,null,null,null,'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',' ',',','.','/','0','1','2','3','4','5','6','7','8','9'];
                            var msgA = msgEnc.split('');    //makes an array of every character in the encoded message
                            var msgB = [];  //will be an array of every 2-digit identifier number
                            var msg = "";   //will be the decoded message
                            for (var i = 0; i < msgA.length; i+= 2) {
                                msgB.push(msgA[i+0] + msgA[i+1]);   //makes msgB into an array of the 2-digit codes
                            };
                            for (var j = 0; j< msgB.length; j++) {
                                msg = msg + enc[msgB[j]];    //adds the next decoded character of msgB
                            };
                            lib.cmlog("^^^ Decoded message ^^^");   //outputs: ^^^ Decoded message ^^^
                            lib.cmlog(msg);    //outputs the decoded message
                        }
                    },
                    note: {
                        write: function(note) {     //makes a note
                            if (files.txt.notes == undefined) {
                                lib.cmlog(msg.err[4]);
                            } else {
                                files.txt.notes.push(' '+files.txt.notes.length+': '+note + ' (/end)');
                                lib.cmlog('\"'+note+'\" added to entrie: '+(files.txt.notes.length - 1)+' of notes.txt');
                            }
                        },
                        read: function(index) {     //outputs the contents of one or all the notes
                            if (index == "all") {
                                lib.cmlog(files.txt.notes);
                                lib.cmlog('notes');
                            } else {
                                lib.cmlog(files.txt.notes[index]);
                                lib.cmlog('notes');
                            }
                        },
                        delete: function(index) {   //deletes one or all the notes
                            if (index == "all") {
                                files.txt.notes = ["0: entrie (/end)"];
                                lib.cmlog('cleared notes');
                            } else {
                                files.txt.notes.splice(index, 1);
                                lib.cmlog("deleted entire: "+index);
                            }
                        }
                    },
                    game: {
                        mover: {
                            run: function() {
                                vars.game.mover.isRunning = 1;
                                lib.cmlog('levels: 1-' + vars.game.mover.level.length);
                                setFormVal.val = 'game.mover.level~';
                            },
                            play: function(direction) {
                                if (vars.game.mover.isRunning == 1) {
                                    setFormVal.val = 'game.mover.play~';
                                    vars.game.mover.move(direction);
                                }
                            },
                            rules: function() {
                                lib.cmlog('')
                            },
                            end: function() {
                                vars.game.mover.isRunning = 0;
                            },
                            level: function(level) {
                                var level = vars.game.mover.level[level - 1];   //level
                                vars.game.mover.playerX = level[0];     //set playerX
                                vars.game.mover.playerY = level[1];     //set playerY
                                var playerX = vars.game.mover.playerX;
                                var playerY = vars.game.mover.playerY;
                                vars.game.mover.goalX = level[2];
                                vars.game.mover.goalY = level[3];
                                var walLevel = level.slice(4, level.length);    //cut out the first two variables of level
                                for (var i = 0; i < walLevel.length; i += 2) {
                                    vars.game.mover.wallXs.push(walLevel[i]);   //set wall x positions
                                    vars.game.mover.wallYs.push(walLevel[i + 1]);   //set wall y positions
                                }
                                vars.game.mover.drawFeild(20);
                                
                                setFormVal.val = 'game.mover.play~';
                            }
                        },
                        tycoon: {
                            run: function() {
                                var tycoon = vars.game.tycoon;
                                vars.game.tycoon.isRunning = 1;
                                tycoon.daylyDisplay;
                                setFormVal.val = 'game.tycoon.play';
                            },
                            i: function() {
                                var resourceList = vars.game.tycoon.resourceList;
                                var Inv = vars.game.tycoon.userInv;
                                for (var i = 0; i < resourceList.length; i++) {
                                    Inv = vars.game.tycoon.userInv[resourceList[i]];
                                    lib.cmlog(resourceList[i]+': '+Inv.amnt);
                                }
                            },
                            m: function() {
                                var resourceList = vars.game.tycoon.resourceList;
                                var Inv = vars.game.tycoon.market;
                                for (var i = 0; i < resourceList.length; i++) {
                                    Inv = vars.game.tycoon.market[resourceList[i]];
                                    lib.cmlog(resourceList[i]+': '+Inv.amnt+' $'+Inv.price+' per unit');
                                }
                            },
                            s: function(amnt, item) {
                                vars.game.tycoon.sell(item, amnt);
                            },
                            b: function(amnt, item) {
                                vars.game.tycoon.buy(item, amnt);
                            },
                            w: function(days) {
                                vars.game.tycoon.wait(days);
                            },
                            r: function() {
                                vars.game.tycoon.wait(1);
                            },
                            dev: {
                                testPrice: function(days) {
                                    for (var i = 0; i < days; i++) {
                                        setTimeout(function() {vars.game.tycoon.wait(1); cm.game.tycoon.m();}, 500*i);
                                    }
                                }
                            }
                        }
                    },
                    code: {
                        startup: function() {
                            var impr = [
                                'var d = ' + Math.random() + ';',
                                'var a = ' + Math.random() + ';',
                                'var mitr = ' + Math.random() + ';',
                                'var hos = ' + Math.random() + ';',
                                'for (i = 0; i < 50; i++) {',
                                'for (l = 0; l < 58; l++) {',
                                '};',
                                'while (a = true) {',
                                'dm.maga();',
                                '$mmd[arft];',
                                'fnc("function = null");',
                                '#binDsoRt[l].scndry(hoft);',
                                'addNot@svn.cde("6&7-503");',
                                'lst.path(thsCmp/usr/andek/fle/set/git/github/repos/voww/gotm/fool.txt)',
                                'actu.at(<mrr/vr>alwo/dalk.brn(awk)</ale>)'
                            ];
                            for (var z = 0; z < 10; z++) {
                                for (var i = 0; i < 10; i++) {
                                    setTimeout(function(i) {
                                        lib.cmlog(impr[Math.floor(Math.random()*impr.length)]);
                                    }, 30*i);
                                };
                            };
                            setTimeout(function(){cm.code.tree();}, 350);
                        },
                        tree: function() {
                            var impr = [
                                "|",
                                "|__brnch/ff/hfd/zipe",
                                "|",
                                "|____setCons/godle/cloe",
                                "|___fod.dia/sope/arod/noni/ddo",
                                "|",
                                "|______vids/df/gfs/as",
                                "|___sfb/izc/ggh/qrw/mmm.nui",
                                "|",
                                "|________gs/adf/rnccx/gollw/zrq",
                                "|___________________________vsdz/domoe/sfd.txi",
                                "|",
                                "|_________________________rwe/lndf/tuy/vv.gol"
                            ];
                            for (var z = 0; z < 10; z++) {
                                for (var i = 0; i < 10; i++) {
                                    setTimeout(function(i) {
                                        lib.cmlog(impr[Math.floor(Math.random()*impr.length)]);
                                    }, 30*i);
                                };
                            };
                            setTimeout(function() {cm.console.clear();}, 350);
                            setTimeout(function() {lib.cmlog('Startup complete.');}, 360);
                        }
                    },
                    story: {
                        launch: function() {
                            setTimeout(function() {lib.cmlog('t-5');}, 1000);
                            setTimeout(function() {lib.cmlog('t-4');}, 2000);
                            setTimeout(function() {lib.cmlog('t-3');}, 3000);
                            setTimeout(function() {lib.cmlog('t-2');}, 4000);
                            setTimeout(function() {lib.cmlog('t-1');}, 5000);
                            setTimeout(function() {lib.cmlog('LAUNCH');}, 6000);
                        }
                    },
                    /*
                    session: {
                        
                        lock: function(pass) {
                            if (vars.system.locked == false) {
                                if (pass == vars.system.pass) {
                                    vars.system.locked = true;
                                    lib.cmlog("session locked");
                                }
                            } else if (vars.system.locked == true) {
                                lib.cmlog("session is already locked");
                            }
                        },
                        setPassword: function(oldPass, newPass) {
                            if (oldPass == vars.system.pass) {
                                vars.system.pass = newPass;
                                lib.cmlog("password reset");
                            }
                        },
                        unlock: function(pass) {
                            if (vars.system.locked == true) {
                                if (pass == vars.system.pass) {
                                    vars.system.locked = false;
                                    lib.cmlog("session unlocked");
                                }
                            } else if (vars.system.locked == false) {
                                lib.cmlog("session is already unlocked");
                            }
                        }
                    }
                    */
                };

                cm.code.startup();
            </script>

            <script id="calling functions">
                $("form").on("submit", function(event) {
                    event.preventDefault();     //stops the form from reloading the page, I think

                    var $input = $(this).find('input');     //step 1 of getting the form input
                    var input = $input.val();       //step 2 of getting the form input
                    var prts = input.split("~");      //splits the user's input from functin called to arguments

                    //if ((vars.system.locked == false) && (prts[0] != "session.unlock")) {
                        lib.usrLog(input);      //initially outputting the user's input to keep track of what happened later
                        var parts = prts[0].split('.');     //splits the first part of the input(the function naming part)
                        var fn = null;      //fn will be called later, as the function

                    
                        for (var i = 0; i< parts.length ; i++) {
                            if (fn == null) {
                                fn = cm[parts[i]];      //if this is the first loop, build the first part of the fn function
                            } else {
                                fn = fn[parts[i]];      //if this is not the first loop, build on top of the fn function
                            }
                        };

                        if (prts[1] == undefined) {
                            fn();       //if there are no arguments, call fn without any
                        } else {
                            var arguments = prts[1].split('//');   //if there are args, split them on ' & '
                            if (arguments.length == 1) {
                                fn(arguments[0]);       //if there is one arg, call fn with one
                            } else if (arguments.length == 2) {
                                fn(arguments[0], arguments[1]);     //if there are 2 args, call fn with 2
                            }
                        }
                    //};
                    $('#form').val(setFormVal.val);
                    setFormVal.val = ''
                });
            </script>
        </body>
    </html>